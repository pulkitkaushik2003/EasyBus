<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EasyBus Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
  body {
    background: #f3f3f7;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
  }

  /* Sidebar fix */
  .sidebar {
    background: #2d3e50;
    height: 100vh;
    width: 230px;
    
    color: #fff;
    width: 250px;
    position: fixed;      /* Fix sidebar */
    top: 0;
    left: 0;
    padding: 0;
    overflow-y: auto;     /* Scroll if needed */
  }

  .sidebar .nav-link {
    color: #bdbbd6;
    font-size: 1.1rem;
    margin: 10px 0;
    display: flex;
    align-items: center;
    border-radius: 10px;
    transition: background .2s;
  }
  .sidebar .nav-link.active,
  .sidebar .nav-link:hover {
    background: rgba(255,255,255,0.07);
    color: #fff;
  }

  /* Main area fix */
  .main-area {
    margin-left: 250px;   /* sidebar ke width ke barabar */
    padding: 35px 40px 25px 40px;
    min-height: 100vh;
  }

  /* Responsive sidebar collapse */
  @media (max-width: 991px) {
    .sidebar {
      position: relative;
      width: 100%;
      min-height: auto;
    }
    .main-area {
      margin-left: 0;
      padding: 15px;
    }
  }

  /* Cards & content styling */
  .stat-card {
    border-radius: 20px;
    color: #bc4747;
    padding: 22px;
    box-shadow: 0px 12px 33px rgba(81, 82, 233, 0.08);
    min-width: 240px;
    position: relative;
  }

  .bus-list, .all-bookings {
    background: #fff;
    border-radius: 22px;
    padding: 24px;
    box-shadow: 0 12px 23px rgba(195, 199, 244, 0.13);
    margin-bottom: 28px;
  }

  .promo-card {
    background: linear-gradient(90deg,#2a215e 60%,#763c8d 100%);
    color: #fbfafd;
    border-radius: 22px;
    padding: 1.5rem;
    margin-bottom: 24px;
    min-height: 155px;
    display: flex;
    align-items: center;
  }
</style>

</head>
<body>
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
   <!-- Toggle Button (visible on small screens) -->
<button class="btn btn-primary d-lg-none m-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu">
  ☰ Menu
</button>

<!-- Offcanvas Sidebar -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarMenu">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">EasyBus</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="nav flex-column">
      <li><a class="nav-link active" href="/dashboard">Dashboard</a></li>
      <li><a class="nav-link" href="/userroutes">Bus Routes</a></li>
      <li><a class="nav-link" href="/my-bookings">My Bookings</a></li>
      <li><a class="nav-link" href="/my-feedback">Feedback</a></li>
      <li><a class="nav-link" href="#">Report</a></li>
      <li><a class="nav-link" href="#">Settings</a></li>
      <li><a class="nav-link" href="#">Help & Support</a></li>
    </ul>
  </div>
</div>


    <!-- Main Area -->
    <main class="main-area col-lg-10 col-md-12">
      <!-- Top Row: Greeting and Profile -->
      <div class="d-flex flex-wrap justify-content-between align-items-center mb-4">
        <div class="fs-4 fw-bold">Good Morning!</div>
        <form class="d-flex" role="search" style="max-width: 340px;">
          <input class="form-control" type="search" placeholder="Search" aria-label="Search">
        </form>
        <div class="d-flex align-items-center gap-3">
          <span style="font-size: .99rem; color: #7e66d9;">
            <svg width="22" height="22" fill="none"><circle cx="11" cy="11" r="9" stroke="#6970dd" stroke-width="2"/><path d="M11 6v5l3 3" stroke="#6970dd" stroke-width="2" stroke-linecap="round"/></svg>
            Next Bus Arrival
          </span>
          <div class="dropdown">
            <button class="btn btn-light fw-bold dropdown-toggle" type="button" data-bs-toggle="dropdown">
              Adam Smith
              <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Avatar" width="36" height="36" class="rounded-circle ms-2">
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Profile</a></li>
              <li><a class="dropdown-item" href="#">Settings</a></li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <form th:action="@{/logout}" method="post" class="d-inline">
                  <button type="submit" class="dropdown-item" style="background: none; border: none; width: 100%; text-align: left;">Logout</button>
                </form>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Statistics Row -->
      <div class="row g-4 mb-4 stats-row flex-nowrap overflow-auto">
        <div class="col">
          <div class="stat-card stat-purple d-flex align-items-center">
            <span class="stat-icon">
              <svg width="34" height="34" fill="#fff" viewBox="0 0 20 20"><rect width="20" height="10" y="6" rx="2"/><circle cx="12" cy="10" r="3" fill="#ffd369"/></svg>
            </span>
            <div>
              <div class="fs-6 fw-semibold">Total Earnings</div>
              <div class="fs-3 fw-bold">$12,500
                <span class="stat-trend-up">+7%</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="stat-card stat-pink d-flex align-items-center">
            <span class="stat-icon">
              <svg width="34" height="34" fill="#fff" viewBox="0 0 20 20"><rect x="4" y="3" width="12" height="14" rx="2"/><rect x="9" y="1" width="2" height="4" rx="1"/><rect x="6" y="8" width="8" height="2" rx="1"/></svg>
            </span>
            <div>
              <div class="fs-6 fw-semibold">Today's Bookings</div>
              <div class="fs-3 fw-bold">3,568 
                <span class="stat-trend-up">+5%</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="stat-card stat-blue d-flex align-items-center">
            <span class="stat-icon">
              <svg width="34" height="34" fill="#fff" viewBox="0 0 20 20"><circle cx="10" cy="10" r="9"/><path d="M10 7v4l2 2" stroke="#fff" stroke-width="2" /></svg>
            </span>
            <div>
              <div class="fs-6 fw-semibold">Successful Departure</div>
              <div class="fs-3 fw-bold">142/220
                <span class="stat-trend-up">+2%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Content: Two Columns -->
      <div class="row">
        <!-- Left Column (Bus List, All Booking) -->
        <div class="col-lg-7 col-md-12">
          <div class="bus-list mb-4">
            <div class="d-flex justify-content-between align-items-center">
              <h5 class="mb-0 fw-bold">Bus List</h5>
              <span class="badge bg-light text-dark">Today Active Buses 120</span>
              <span class="ms-3 driver-info">
                <svg width="20" height="20" fill="#6970dd"><circle cx="10" cy="10" r="10" fill="#d8d2f7"/><text x="50%" y="53%" text-anchor="middle" font-size="11px" fill="#421664" dy=".3em">AC</text></svg>
                Arian Chowdhury (Driver) &bull; Seats: <strong>Fully Packed</strong>
              </span>
            </div>
            <hr>
            <ul class="list-group list-group-horizontal">
              <li class="list-group-item border-0 ps-0 pe-4" style="background: none;">
                <span>Shyamoli Paribahan</span><br>
                <span class="text-muted small">SHY101 • DHA - CHT</span>
              </li>
              <li class="list-group-item border-0 px-4 bus-active">
                <span>Green Line Paribahan</span><br>
                <span class="text-light small">GLP202 • DHA - CHT</span>
              </li>
              <li class="list-group-item border-0 ps-4 pe-0" style="background: none;">
                <span>Hanif Enterprise</span><br>
                <span class="text-muted small">HAN303 • DHA - RAJ</span>
              </li>
            </ul>
            <div class="map-placeholder mt-3 mb-1">
              <span>
                <svg width="130" height="65"><rect width="130" height="65" fill="#c1d0f7"/><circle cx="30" cy="35" r="7" fill="#6c5dd3"/><text x="30" y="60" font-size="10" text-anchor="middle" fill="#6c5dd3">Green Line Paribahan</text></svg>
                &nbsp;Route Map: DHA – CHT (Arrives 09:30 am)
              </span>
            </div>
          </div>
          <div class="all-bookings">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="fw-bold mb-0">All Booking List</h5>
              <div>
                <button class="btn btn-primary btn-sm">Add New +</button>
                <button class="btn btn-outline-secondary btn-sm ms-2">Monthly</button>
              </div>
            </div>
            <table class="table align-middle table-borderless">
              <thead>
                <tr>
                  <th>BookingID</th>
                  <th>Username</th>
                  <th>Route</th>
                  <th>Date / Time</th>
                  <th>Seats</th>
                  <th>Payment</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
    <tr th:each="booking, iterStat : ${bookings}"
        th:class="${iterStat.index >= 3} ? 'extra-booking d-none' : ''">
        <td th:text="${booking.id}"></td>
        <td th:text="${booking.userName}"></td>
        <td th:text="${booking.routeName}"></td>
        <td th:text="${#temporals.format(booking.travelDate, 'dd-MMM-yyyy')}"></td>
        <td th:text="${booking.seatsBooked}"></td>
        <td th:text="'₹' + ${booking.totalFare}"></td>
        <td th:text="${booking.status}"></td>
    </tr>
</tbody>
<tfoot>
    <tr>
        <td colspan="6" class="text-center">
            <button id="toggleBtn" class="btn btn-primary btn-sm">Show More</button>
        </td>
    </tr>
</tfoot>


              
            </table>
          </div>
        </div>
        <!-- Right Column (Promo, Activity) -->
        <div class="col-lg-5 col-md-12">
          <div class="promo-card mb-3">
            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Passenger">
            <div>
              <div class="fs-5 mb-2">Secure your seat and enjoy the journey!</div>
              <span style="font-size: .94rem;">Plan ahead, book your tickets any time for a smooth ride.</span>
            </div>
          </div>
          <div class="calendar mb-3">
            <div><strong>Activity</strong> <span class="float-end"><button class="btn btn-outline-primary btn-sm">Add Bus +</button></span></div>
            <div style="font-size:.93rem" class="mt-2">October 15, 2024</div>
            <div class="mt-1 mb-2">
              <span class="day">Tue</span>
              <span class="day active">Wed</span>
              <span class="day">Thu</span>
              <span class="day">Fri</span>
              <span class="day">Sat</span>
            </div>
          </div>
          <div class="activity-card next mb-2">
            <div class="fw-bold">Chattogram Express</div>
            <div class="text-muted small">Dhaka to Chattogram</div>
            <div class="fw-bold">07:00 am <span class="text-danger ms-2">Next</span></div>
          </div>
          <div class="activity-card later">
            <div class="fw-bold">Dhaka Express</div>
            <div class="text-muted small">Dhaka to Chattogram</div>
            <div class="fw-bold">08:00 am <span class="text-info ms-2">Later</span></div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const toggleBtn = document.getElementById("toggleBtn");
        const extraBookings = document.querySelectorAll(".extra-booking");
        let expanded = false;

        toggleBtn.addEventListener("click", function () {
            expanded = !expanded;
            extraBookings.forEach(item => {
                if (expanded) {
                    item.classList.remove("d-none");
                } else {
                    item.classList.add("d-none");
                }
            });
            toggleBtn.textContent = expanded ? "Show Less" : "Show More";
        });

        // Agar 3 ya usse kam bookings hain toh button hide kar do
        if (extraBookings.length === 0) {
            toggleBtn.style.display = "none";
        }
    });
</script>

<!-- Bootstrap 5 JS (for dropdowns) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
